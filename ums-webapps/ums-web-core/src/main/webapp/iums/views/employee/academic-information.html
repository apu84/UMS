<div data-ng-if="vm.showLoader" align="center">
    <i class="fa fa-spinner fa-spin fa-4x fa-fw"></i>
    <span class="sr-only">Loading...</span>
</div>

<div data-ng-if="!vm.showLoader">
    <div data-ng-repeat="academic in vm.academic track by $index">
        <form name="nForm[$index]" ng-submit="vm.submit($index)" novalidate>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="row">
                        <div class="col-md-9">{{$index + 1}}. {{academic.degreeTitle.title}}</div>
                        <div class="col-md-3">
                            <div data-ng-show="vm.enableEditButton">
                                <div data-ng-show="!vm.enableEdit[$index]">
                                    <div align="right">
                                        <a data-ng-click="vm.activeEditButton($index, true)"
                                           style="cursor: pointer;">
                                            <i style="color: blue;" class="fa fa-edit"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <div data-ng-show="academic.degreeLevel.id=='100010' && !academic.degreeTitle && vm.enableEdit[$index]">
                        <div class="alert alert-danger alert-dismissable"
                             style="-moz-border-radius: 15px !important;border-radius: 15px !important;">
                            <button type="button" data-dismiss="alert" aria-hidden="true" class="close">Ã—</button>
                            If you don't find <strong>Degree Title</strong> for <strong>PhD</strong>, please <a
                                data-toggle="modal" data-target="#addDegreeTitle" style="cursor: pointer;"><u><b>Click
                            here</b></u></a>
                            to add Degree Title.
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group"
                                 ng-class="{ 'has-error' : nForm[$index].nAcademicDegreeLevel.$invalid && !nForm[$index].nAcademicDegreeLevel.$pristine }">
                                <label for="iAcademicDegreeLevel" class="control-label">Degree Level<span
                                        data-ng-show="vm.enableEdit[$index]"
                                        class='require'>*</span></label>

                                <div data-ng-show="vm.enableEdit[$index]">
                                    <select name="nAcademicDegreeLevel"
                                            id="iAcademicDegreeLevel"
                                            data-ng-model="academic.degreeLevel"
                                            data-ng-options="degreeLevel.name for degreeLevel in vm.degreeLevel track by degreeLevel.id"
                                            class="form-control" required>
                                        <option value="">Select Degree</option>
                                    </select>
                                    <label data-ng-show="nForm[$index].nAcademicDegreeLevel.$invalid && !nForm[$index].nAcademicDegreeLevel.$pristine"
                                           class="help-block control-label">Please specify degree Level.</label>

                                </div>
                                <div data-ng-show="!vm.enableEdit[$index]">
                                    <div class="underlineBox">
                                        <label class="control-label">{{academic.degreeLevel.name}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group"
                                 ng-class="{ 'has-error' : nForm[$index].nAcademicDegreeTitle.$invalid && !nForm[$index].nAcademicDegreeTitle.$pristine }">
                                <label for="iAcademicDegreeTitle" class="control-label">Degree Title<span
                                        data-ng-show="vm.enableEdit[$index]"
                                        class='require'>*</span></label>

                                <div data-ng-show="vm.enableEdit[$index]">
                                    <select name="nAcademicDegreeTitle"
                                            id="iAcademicDegreeTitle"
                                            data-ng-model="academic.degreeTitle"
                                            data-ng-options="degreeTitle.title for degreeTitle in (vm.degreeTitle | filter: {degreeLevel: academic.degreeLevel}) track by degreeTitle.id"

                                            class="form-control" required>
                                        <option value="">Select Degree Title</option>
                                    </select>
                                    <label data-ng-show="nForm[$index].nAcademicDegreeTitle.$invalid && !nForm[$index].nAcademicDegreeTitle.$pristine"
                                           class="help-block control-label">Please specify degree Title.</label>

                                </div>
                                <div data-ng-show="!vm.enableEdit[$index]">
                                    <div class="underlineBox">
                                        <label class="control-label">{{academic.degreeTitle.title}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-4">
                            <div class="form-group"
                                 ng-class="{ 'has-error' : nForm[$index].nAcademicMajor.$invalid && !nForm[$index].nAcademicMajor.$pristine }">
                                <label for="iAcademicMajor" class="control-label">Major/Concentration<span
                                        data-ng-show="vm.enableEdit[$index]"
                                        class='require'>*</span></label>

                                <div data-ng-show="vm.enableEdit[$index]">
                                    <input name="nAcademicMajor"
                                           id="iAcademicMajor"
                                           data-ng-model="academic.major"
                                           class="form-control" required>
                                    <label data-ng-show="nForm[$index].nAcademicMajor.$invalid && !nForm[$index].nAcademicMajor.$pristine"
                                           class="help-block control-label">Please specify Major.</label>

                                </div>
                                <div data-ng-show="!vm.enableEdit[$index]">
                                    <div class="underlineBox">
                                        <label class="control-label">{{academic.major}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group"
                                 ng-class="{ 'has-error' : nForm[$index].nAcademicInstitution.$invalid && !nForm[$index].nAcademicInstitution.$pristine }">
                                <label for="iAcademicInstitution" class="control-label">Institution<span
                                        data-ng-show="vm.enableEdit[$index]"
                                        class='require'>*</span></label>

                                <div data-ng-show="vm.enableEdit[$index]">
                                    <input type="text"
                                           name="nAcademicInstitution"
                                           id="iAcademicInstitution"
                                           data-ng-model="academic.institution"
                                           placeholder="Institution"
                                           maxlength="145"
                                           class="form-control" required>

                                    <label data-ng-show="nForm[$index].nAcademicInstitution.$invalid && !nForm[$index].nAcademicInstitution.$pristine"
                                           class="help-block control-label">Please provide your institution.</label>
                                </div>
                                <div data-ng-show="!vm.enableEdit[$index]">
                                    <div class="underlineBox">
                                        <label class="control-label">{{academic.institution}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group"
                                 ng-class="{ 'has-error' : nForm[$index].nPassingYear.$invalid && !nForm[$index].nPassingYear.$pristine }">
                                <label for="iPassingYear" class="control-label">Passing Year<span
                                        data-ng-show="vm.enableEdit[$index]"
                                        class='require'>*</span></label>
                                <div data-ng-show="vm.enableEdit[$index]">
                                    <select
                                            name="nPassingYear"
                                            id="iPassingYear"
                                            data-ng-model="academic.passingYear"
                                            data-ng-options="year for year in vm.year"
                                            autocomplete="off"
                                            class="form-control" required>
                                        <option value="">Select Passing Year</option>
                                    </select>
                                    <label data-ng-show="nForm[$index].nPassingYear.$invalid && !nForm[$index].nPassingYear.$pristine"
                                           class="help-block control-label">Please provide your passing year.</label>
                                </div>
                                <div data-ng-show="!vm.enableEdit[$index]">
                                    <div class="underlineBox">
                                        <label class="control-label">{{academic.passingYear}}</label>
                                    </div>
                                </div>

                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group"
                                 ng-class="{ 'has-error' : nForm[$index].nResult.$invalid && !nForm[$index].nResult.$pristine }">
                                <label for="iResult" class="control-label">Result</label>
                                <div data-ng-show="vm.enableEdit[$index]">
                                    <input type="text"
                                           name="nResult"
                                           id="iResult"
                                           data-ng-model="academic.result"
                                           placeholder="gpa/cgpa/division"
                                           autocomplete="off"
                                           maxlength="25"
                                           class="form-control">

                                    <label data-ng-show="nForm[$index].nResult.$invalid && !nForm[$index].nResult.$pristine"
                                           class="help-block control-label">What was your result?</label>
                                </div>
                                <div data-ng-show="!vm.enableEdit[$index]">
                                    <div class="underlineBox">
                                        <label class="control-label">{{academic.result}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-3">
                            <div class="form-group"
                                 ng-class="{ 'has-error' : nForm[$index].nDuration.$invalid && !nForm[$index].nDuration.$pristine }">
                                <label for="iDuration" class="control-label">Duration</label>
                                <div data-ng-show="vm.enableEdit[$index]">
                                    <input type="number"
                                           name="nDuration"
                                           id="iDuration"
                                           data-ng-model="academic.duration"
                                           autocomplete="off"
                                           maxlength="25"
                                           class="form-control">

                                    <label data-ng-show="nForm[$index].nDuration.$invalid && !nForm[$index].nDuration.$pristine"
                                           class="help-block control-label">Please provide duration.</label>
                                </div>
                                <div data-ng-show="!vm.enableEdit[$index]">
                                    <div class="underlineBox">
                                        <label class="control-label">{{academic.duration}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div data-ng-show="vm.enableEdit[$index]">
                            <div class="col-md-4">
                           <span data-ng-show="academic.id">
                               <button type="button" class="btn btn-primary btn-xs"
                                       data-ng-click="vm.activeEditButton($index, false)"
                                       style="cursor:pointer;">Cancel
                            </button>
                           </span>
                            </div>
                            <div class="col-md-8">
                                <div align="right">
                                    <button type="button" class="btn btn-primary btn-xs"
                                            title="Remove Row {{$index + 1}}"
                                            data-ng-click="vm.delete($index)"
                                            style="cursor:pointer;"><span data-ng-show="!academic.id">Remove</span><span
                                            data-ng-show="academic.id">Delete</span>
                                    </button>
                                    <button type="submit" title="Submit" class="btn btn-success btn-xs"
                                            data-ng-disabled="nForm[$index].$invalid"
                                            style="cursor:pointer;"><span data-ng-show="!academic.id">Save</span><span
                                            data-ng-show="academic.id">Update</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <div class="row">
        <div class="col-md-12">
            <div data-ng-show="vm.enableEditButton">
                <button title="Add New Row" type="button" class="btn btn-success btn-xs"
                        data-ng-click="vm.addNew(); vm.activeEditButton(vm.academic.length - 1, true)"
                        style="cursor: pointer">Add new
                </button>
            </div>
        </div>
    </div>
</div>


<div id="addDegreeTitle" tabindex="-1" role="dialog" aria-labelledby="modal-default-label"
     aria-hidden="true" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" data-dismiss="modal" aria-hidden="true"
                        class="close" style="opacity: 1;margin-top: 0px;">&times;
                </button>
                <h5 id="modal-default-label" class="modal-title">Add Degree Title (PhD)</h5></div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-md-3">
                        <label for="iNewDegreeTitle" class="control-label">Degree Title:</label>
                    </div>
                    <div class="col-md-9">
                        <input type="text"
                               name="nNewDegreeTitle"
                               id="iNewDegreeTitle"
                               data-ng-model="vm.newDegreeTitle"
                               autocomplete="off"
                               maxlength="25"
                               class="form-control">
                    </div>
                </div>
            </div>


            <div class="modal-footer">

                <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
                <button type="button" data-dismiss="modal" class="btn btn-success"
                        data-ng-click="vm.createNewDegreeTitle()">Save
                </button>
            </div>
        </div>
    </div>
</div>
