<style>
    .table thead tr th, .table thead tr td {
        border-bottom: 1px solid #ddd;
    }
    .scrollArea table .recheckAll .th-inner .ng-scope {
        display: inline;
    }
    .table_overlay{
        display:none;
        position:absolute;
        background:#fff;
        border: 1px solid #efefef;
    }
    .scrollableContainer { height: inherit; }
    .timeOverClass{
        background-color: #FDEDEC;
    }
    .submittedClass{
        background-color: #EAFAF1;
    }
    .noneClass{
        background-color: transparent;
    }
    .redColor{
        color: #ff0000;
        font-weight: bold;
    }
    .gradeSelectBox{
        width: 80px;
        border: 1px solid grey;
        padding: 0px;
        height: 22px !important;
        background-color: rgb(235, 235, 228);
    }
    .table select{
        padding : 3px 10px !important;
    }
    .badge-total{
        background-color: white;color: black;font-weight: bold;
        padding-top: 4px;
    }
</style>
<div class="row" id="selection1">
    <div onclick="resetCommonCollapsibleDivs()" id="arrowDiv"><i
            class="fa fa-angle-double-right fa-cx"></i></i> </div>
    <div class="panel panel-green" id="leftDiv">
        <div class="panel-heading">
            <h3 class="panel-title">Select Parameters</h3>
        </div>
        <div class="panel-body pan">
            <form action="" class="form-horizontal" data-validate=""  data-onvalidate="fetchGradeSubmissionTable"  id="frmGradeSheetPramSelector">
                <div class="form-body pal">
                    <div class="form-group">
                        <label class="col-md-4 control-label">Program Type</label>
                        <div class="col-md-8">
                            <select name="programType" class="form-control required" data-ng-model="inputParams.program_type" data-ng-change="loadSemesters()" data-convert-to-number >
                                <option  value="11">Undergraduate</option>
                                <option  value="22">Postgraduate</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label">Semester</label>

                        <div class="col-md-8">
                            <select name="semester" class="form-control required" data-ng-model="inputParams.semester_id" data-convert-to-number >
                                <option data-ng-repeat="semester in data.semesters" value="{{semester.id}}">{{semester.name}}</option>
                            </select>
                        </div>


                    </div>
                    <div class="form-group">
                        <label class="col-md-4 control-label">Exam Type</label>
                        <div class="col-md-8">
                            <select name="examType" class="form-control required" data-ng-model="inputParams.exam_typeId" data-convert-to-number>
                                <option  value="1">Semester Final</option>
                                <option  value="2">Clearance/Carry/Improvement</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group" data-ng-if="userRole!='T'">
                        <label class="col-md-4 control-label">Dept./School</label>

                        <div class="col-md-8">
                            <select class="form-control" id="dept_id" data-ng-model="inputParams.dept_id" data-ng-change="loadPrograms()" data-convert-to-number>
                                <option data-ng-repeat="department in data.depts" value="{{department.id}}">{{department.name}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group"  data-ng-if="userRole!='T'">
                        <label class="col-md-4 control-label">Program Name</label>

                        <div class="col-md-8">
                            <select class="form-control" id="program_id" data-ng-model="inputParams.program_id" data-convert-to-number>
                                <option data-ng-repeat="program in data.programs" value="{{program.id}}">{{program.shortName}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group"  data-ng-if="userRole!='T'">
                        <label class="col-md-4 control-label">Year-Semester</label>
                        <div class="col-md-8">
                            <select class="form-control required" data-ng-model="inputParams.year_semester" data-convert-to-number>
                                <option data-ng-repeat="ys in data.yearSemester" value="{{ys.id}}">{{ys.name}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group"  data-ng-if="userRole!='T'">
                        <label class="col-md-4 control-label">Status</label>
                        <div class="col-md-8">
                            <select class="form-control required" data-ng-model="inputParams.status" data-convert-to-number>
                                <option data-ng-repeat="status in data.markSubmissionStatus" value="{{status.id}}">{{status.name}}</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group"  data-ng-if="userRole!='T'">
                        <label class="col-md-4 control-label">Course Number</label>
                        <div class="col-md-8">
                            <input type="text" class="form-control" data-ng-model="inputParams.course_no">
                        </div>
                    </div>
                </div>
                <div class="form-actions text-right pal">
                    <button type="button" class="btn btn-success" >Search</button>
                </div>
            </form>
        </div>
    </div>
    <div id="rightDiv">
        <div class="panel">
            <div class="panel-heading">Assigned Course List<span
                    class="subtitle" data-ng-if="allMarksSubmissionStatus!=null">Total {{allMarksSubmissionStatus.length}} course(s) found</span></div>
            <div class="panel-body shadowPanel"   style="min-height: 490px;">

                <table class="table table-hover table-bordered">
                    <thead>
                    <tr>
                        <th width="8%">Course No</th>
                        <th width="20%">Course Title</th>
                        <th width="4%" style="text-align: center;">Y-S</th>
                        <th width="8%" style="text-align: center;">Program.</th>
                        <th width="20%">Course Teacher</th>
                        <th width="18%">Preparer-Scrutinizer</th>
                        <th width="11%">Status</th>
                        <th width="9%">Deadline</th>
                    </tr>

                    </thead>
                    <tbody>
                    <!--data-ng-class="{'timeOver':marksSubmission.isSubmissionDateOver}"  -->
                    <tr ng-repeat="marksSubmission in allMarksSubmissionStatus" ng-class="getSubmissionColorCodeStyle(marksSubmission.submissionColorCode)">
                        <td>
                            <a href="javascript:void(0)" data-ng-click="fetchGradeSheet(marksSubmission.courseId,marksSubmission.semesterId,marksSubmission.examTypeId)" style="color: blue;">
                                {{marksSubmission.courseNo}}
                            </a>
                        </td>
                        <td>{{marksSubmission.courseTitle}}</td>
                        <td align="center">{{marksSubmission.year}}-{{marksSubmission.semester}}</td>
                        <td align="center">{{marksSubmission.offeredTo}}</td>
                        <td>
                            <span ng-repeat="courseTeacher in marksSubmission.courseTeacherList  | limitTo:4">
                                {{courseTeacher.teacher_name}}   {{$last ? '' : ($index==marksSubmission.courseTeacherList.length-2) ? ' and ' : ', '}}
                            </span>
                            <span  ng-if="marksSubmission.courseTeacherList.length > 4">...
							<a data-toggle="tooltip" tooltip-trigger="none" data-placement="bottom" title="{{ marksSubmission.courseTeacherStr }}"><i class="fa fa-hand-o-down" aria-hidden="true"></i></a>
							</span>

                        </td>
                        <td>{{marksSubmission.preparerName}} <span class="badge badge-warning">P</span> <br/>
                            {{marksSubmission.scrutinizerName}} <span class="badge badge-info">S</span></td>
                        <td>{{marksSubmission.statusName}}</td>
                        <td>
                            <!--data-ng-class="{'redColor':marksSubmission.isSubmissionDateOver}"-->
                            {{marksSubmission.lastSubmissionDatePrep}} <span class="badge badge-warning">P</span><br/>
                            {{marksSubmission.lastSubmissionDateScr}} <span class="badge badge-info">S</span><br/>
                            {{marksSubmission.lastSubmissionDateHead}} <span class="badge badge-grey">H</span>
                        </td>
                    </tr>
                    </tbody>
                </table>

            </div>
            <div class="form-actions text-right pal" style="margin-top:25px;display: none;">

            </div>
        </div>
    </div>
</div>

<div class="row" id="selection2" style="display: none;">

    <div class="col-md-12">

        <div class="panel panel-default">
            <div id='back_container'  style="position: absolute;top: 0px; left: 20px;cursor: pointer;z-index: 99999;" onclick='goBack()'>
                <img src="images/icons/back.png"  />
            </div>
            <div id='outer_container' style="position: absolute;top: 40px; right: 55px;z-index: 99999;">
                <a class="menu_button" href="javascript:void(0)" title="Toggle"><span>Menu Toggle</span></a>
                <ul class="menu_option">
                    <li>
                        <a href="javascript:void(0)" data-ng-click="downloadPdf()"  style="background: #ea4c3a" title="Download Pdf">
                            <span style="background-image:  url('images/icons/pieMenu-marksSubmission/pdf-256.png')">Item</span>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:void(0)"data-ng-click="generateXls()"style="background: transparent;" title="Download Excel">
                            <span style="background-image:  url('images/icons/pieMenu-marksSubmission/excel-download.png')" >Item</span>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:void(0)" data-target="#modal-prompt" data-toggle="modal" style="background: transparent;" title="Upload Excel Data">
                            <span style="background-image:  url('images/icons/pieMenu-marksSubmission/excel-paste.png')">Item</span>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:void(0)" data-ng-click="fetchMarksSubmissionLog()" data-target="#modal-marks_submission_status_log" data-toggle="modal" style="background: transparent;" title="Marks Submission Status Log">
                            <span style="background-image:  url('images/icons/pieMenu-marksSubmission/log1.png')">Item</span>
                        </a>
                    </li>
                    <li>
                        <a href="javascript:void(0)"  data-target="#modal-marks_status_log" data-toggle="modal" style="background: transparent;" title="Marks Log">
                            <span style="background-image:  url('images/icons/pieMenu-marksSubmission/log2.png')">Item</span>
                        </a>
                    </li>
                </ul>
            </div>

            <div class="panel-body shadowPanel" style="min-height: 400px;line-height: 100px;font-size: 20px;text-align: center;color: maroon;"  data-ng-if="gradeSubmissionStatus =='0' && currentActor!='preparer'">
                Marks not yet been submitted. Please check again later. <br/>
                <button type="button" class="btn btn-default btn-square" onclick='goBack()'>Back to Grade Sheet Selection</button>
            </div>

            <div id="loading_panel" class="panel-body shadowPanel" style="height: 90%;text-align: center">
                <div data-spinner=""></div>
            </div>

            <div id="panel_top" class="panel-body shadowPanel" style="position: relative;"  data-ng-if="gradeSubmissionStatus !='0' || currentActor=='preparer'" >
                <table width="90%" align="center" style="margin-bottom: 10px;">
                    <tr>
                        <td colspan="4" align="center" style="height: 30px;">
                            <h4>Marks/Grade Sheet <b>({{data.semester_name}})</b></h4>
                            <h4>Department/School :<b> {{data.dept_short_name}}</b>, Program : <b>{{data.program_short_name}}</b> </h4>
                        </td>
                    </tr>
                    <tr>
                        <td width="15%"><b>Course Title :</b></td>
                        <td width="40%" style="font-weight: bold;color: blue;font-size: 14px;">{{data.course_title}}</td>
                        <td width="20%"><b>Course Number :</b></td>
                        <td width="25%"  style="font-weight: bold;color: blue;font-size: 14px;">{{data.course_no}}</td>
                    </tr>
                    <tr>
                        <td  style="height: 30px;"><b>Credit Hour :</b></td>
                        <td style="font-weight: bold;font-size: 14px;">
                            {{data.crhr}}<!--<a href="Javascript:void(0)" data-ng-click="refreshGradeSheet()">Reload</a>-->
                        </td>
                        <td data-ng-if="courseType=='THEORY'"><b>Total Part <span data-ng-if="(gradeSubmissionStatus !='0')">({{data.total_part}})</span> :</b></td>
                        <td data-ng-if="courseType=='THEORY'">
                            <select id="total_part" data-ng-model="data.total_part" data-ng-change="onTotalPartChange()"
                                    style="float: left;margin-right:5px;border:1px solid grey;text-align: center;height: 23px;"
                                    data-ng-if="(gradeSubmissionStatus =='0' && currentActor=='preparer')" data-convert-to-number>
                                <option value="1">&nbsp;1&nbsp;</option>
                                <option value="2">&nbsp;2&nbsp;</option>
                            </select>


                            <div style="float: left;" id="partDiv" data-ng-show="courseType=='THEORY'">
                                Part-A
                                <input type="text" style="width: 50px;border:1px solid grey;text-align: center;height: 23px;" data-ng-model="data.part_a_total"  data-ng-if="(gradeSubmissionStatus =='0' && currentActor=='preparer')" >
                                <img  class='img_tooltip'  id="tooltip_partA_"/>

                                <span data-ng-if="(gradeSubmissionStatus !='0' || currentActor!='preparer')">{{data.part_a_total}}</span>&nbsp;&nbsp;
                                <span data-ng-if="(data.total_part=='2')">
                            Part-B  <input type="text" style="width: 50px;border:1px solid grey;text-align: center;height: 23px;" data-ng-model="data.part_b_total" data-ng-if="(gradeSubmissionStatus =='0' && currentActor=='preparer')"/>
                                <img  class='img_tooltip'  id="tooltip_partB_"/>
                                    <span data-ng-if="(gradeSubmissionStatus !='0' || currentActor!='preparer')">{{data.part_b_total}}</span>
                            </span>
                            </div>
                        </td>
                    </tr>

                    <tr>
                        <td><b>Total Students :</b></td>
                        <td style="font-size: 18px;font-weight: bold;">
                            <span ng-if="gradeSubmissionStatus =='0'">
                                {{noneSubmittedGrades.length}}
                            </span>
                            <span ng-if="gradeSubmissionStatus !='0'">
                            {{chartData[0].total+chartData[1].total+chartData[2].total+chartData[3].total+chartData[4].total+chartData[5].total+chartData[6].total+chartData[7].total+chartData[8].total+chartData[9].total}}
                            </span>
                        </td>
                        <td><b>Search :</b></td>
                        <td>
                            <input type="text" data-ng-model="data.searchBox" style="width:100px;border: 1px solid grey;padding-left: 5px;height: 23px;">
                            <a href="javascript:;" class="btn btn-xs btn-default btn-round"
                               data-ng-click="searchStudent()" style="border-radius: 15px;" >
                                <i class="fa fa-search" style="color: blue;" aria-hidden="true"></i>
                            </a>
                            <a href="javascript:;" class="btn btn-xs btn-default btn-round"
                               data-ng-click="clearSearch()" style="border-radius: 15px;" >
                                <i class="fa fa-eraser" style="color: blue;" aria-hidden="true"></i>
                            </a>
                        </td>
                    </tr>
                    <tr>
                        <td  style="height: 30px;"><b>Current Status :</b></td>
                        <td colspan="3" style="font-weight: bold;color: #E41B17;font-size: 14px;">{{data.status_name}}</td>
                    </tr>
                </table>
                <!-- Grade Sheet Preparer Block (Fresh/New Grade Submission , Requested for recheck grades are not here) -->
                <div ng-if="noneSubmittedGrades.length>0 &&  (gradeSubmissionStatus =='0' && currentActor=='preparer')">

                    <div class="btn btn-blue" style="margin-top: 20px;">
                        <i class="fa fa-check-circle-o"></i>
                        <span style="padding-right: 100px;">{{gradeTitle}}</span>
                    </div>
                    <data-course-reg-type-legend examtype="{{current_examTypeId}}"></data-course-reg-type-legend>
                    <div class="clearfix"></div>
                    <scrollable-table resizable watch="noneSubmittedGrades" ng-style="{height: noneSubmittedGrades.length > 10 ? 450 : (38 + (noneSubmittedGrades.length * 35.5))}">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th sortable-header col="studentId" width="10%">Student Id</th>
                                <th sortable-header col="studentName" width="30%">Student Name</th>
                                <th sortable-header col="quiz" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Quiz (20)</th>
                                <th sortable-header col="classPerformance" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Class Perf. (10)</th>
                                <th sortable-header col="partA" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Part-A ({{data.part_a_total}})</th>
                                <th sortable-header col="partB" width="10%" style="text-align: center;" ng-show="toggleColumn && courseType=='THEORY'">Part-B ({{data.part_b_total}})</th>
                                <th sortable-header col="total" width="10%" style="text-align: center;">Total</th>
                                <th sortable-header col="gradeLetter" width="5%" style="text-align: center;">Grade Letter</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="response in noneSubmittedGrades" row-id="{{response.studentId}}" id="row_{{response.studentId}}" data-emit-last-repeater-element>
                                <td id="sid_{{response.studentId}}" ng-style="calculateStyle(response.regType)">{{response.studentId}}</td>
                                <td id="td_sname_{{response.studentId}}">{{ response.studentName }}</td>
                                <td id="td_quiz_{{response.studentId}}" data-ng-show="courseType=='THEORY'" style="text-align: center;">
                                    <input type="text"  style="width: 80px;border: 1px solid grey;text-align: right;padding-right: 20px;" id="quiz_{{response.studentId}}"
                                           value="{{response.quiz}}" onchange="calculateTotalAndGradeLetter(this.id)" onkeydown="handleKeyPress(event,this.id)" maxlength="5" tabindex="{{$index+1}}0"
                                           data-ng-disabled="checkDisable(response.regType)"/>
                                    <img  class='img_tooltip'  id="tooltip_quiz_{{response.studentId}}"/>
                                </td>
                                <td id="td_cperf_{{response.studentId}}" data-ng-show="courseType=='THEORY'" style="text-align: center;">
                                    <input type="text" style="width: 80px;border: 1px solid grey;text-align: right;padding-right: 20px;" id="class_perf_{{response.studentId}}"
                                           value="{{response.classPerformance}}"  onchange="calculateTotalAndGradeLetter(this.id)" onkeydown="handleKeyPress(event,this.id)" maxlength="5" tabindex="{{$index+1}}1"
                                           data-ng-disabled="checkDisable(response.regType)"/>
                                    <img  class='img_tooltip'  id="tooltip_class_perf_{{response.studentId}}"/>
                                </td>
                                <td id="td_parta_{{response.studentId}}" data-ng-show="courseType=='THEORY'" style="text-align: center;">
                                    <input type="text" style="width: 80px;border: 1px solid grey;text-align: right;padding-right: 20px;" id="part_a_{{response.studentId}}"
                                           value="{{response.partA}}" onchange="calculateTotalAndGradeLetter(this.id)" onkeydown="handleKeyPress(event,this.id)" maxlength="5" tabindex="{{$index+1}}2"/>
                                    <img  class='img_tooltip'  id="tooltip_part_a_{{response.studentId}}"/>
                                </td>
                                <td id="td_partb_{{response.studentId}}" ng-show="toggleColumn && courseType=='THEORY'" style="text-align: center;">
                                    <input type="text" style="width: 80px;border: 1px solid grey;text-align: right;padding-right: 20px;" id="part_b_{{response.studentId}}"
                                           value="{{response.partB}}" onchange="calculateTotalAndGradeLetter(this.id)" onkeydown="handleKeyPress(event,this.id)" maxlength="5" tabindex="{{$index+1}}3"/>
                                    <img  class='img_tooltip'  id="tooltip_part_b_{{response.studentId}}"/>
                                </td>
                                <td id="td_total_{{response.studentId}}" style="text-align: center;">
                                    <input type="text" style="width: 80px;border: 1px solid grey;text-align: right;padding-right: 20px;" data-ng-disabled="courseType=='THEORY'"
                                           id="total_{{response.studentId}}" value="{{response.total}}" onchange="calculateTotalAndGradeLetter(this.id)" onkeydown="handleKeyPress(event,this.id)" maxlength="5" tabindex="{{$index+1}}4"/>
                                    <img  class='img_tooltip'  id="tooltip_total_{{response.studentId}}"/>
                                </td>
                                <td id="td_grade_letter_{{response.studentId}}" style="text-align: center;">
                                    <select  class="gradeSelectBox" id="grade_letter_{{response.studentId}}" disabled="disabled">
                                        <option value="">Select Grade</option>
                                        <option ng-selected="{{gradeLetter.id == response.gradeLetter}}" data-ng-repeat="gradeLetter in data.gradeLetterOptions" value="{{gradeLetter.id}}">{{gradeLetter.name}}</option>
                                    </select>
                                    <img  class='img_tooltip'  id="tooltip_grade_letter_{{response.studentId}}"/>
                                    <input type="hidden" id="reg_type_{{response.studentId}}" value="{{response.regType}}"/>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </scrollable-table>

                    <br/><br/>
                    <div class="row">
                        <div class="col-md-6">
                            <button type="button" class="btn btn-default btn-square" onclick='goBack()'>Back to Grade Sheet Selection</button>
                        </div>
                        <div class="col-md-6" style="text-align: right;">
                            <button type="button" class="btn btn-grey btn-square" data-ng-click="saveGradeSheet()">Save Data</button>
                            <modal data-handler="modalSettings.submitHandler" data-body="modalSettings.submitBody"  data-header="modalSettings.header" data-ng-click-right-button="modalSettings.submitRightButton()"></modal>
                            <a data-target="#{{modalSettings.submitHandler}}" role="button" class="btn btn-green btn-square" data-toggle="modal">Save & Send to Scrutinizer</a>

                        </div>
                    </div>
                    <br/><br/>
                </div>
                <!-- End of Preparer block -->

                <!-- IF the Current Actor have the right to send back or forward the grades -->
                <!-- For example Waiting for Scrutinizer's Approval(Scrutinizer Role), Waiting for Head's Approval(Head Role), Waiting for CoE's Approval(CoE Role) -->
                <div ng-if="candidatesGrades.length>0 &&  (gradeSubmissionStatus =='1' && currentActor=='scrutinizer') || (gradeSubmissionStatus =='3' && currentActor=='head') ||
                     (gradeSubmissionStatus =='5' && currentActor=='coe')"  id="top_div">

                    <div class="btn btn-blue" style="margin-top: 20px;">
                        <i class="fa fa fa-spinner"></i>
                        <span style="padding-right: 100px;">{{gradeTitle}}<span class="badge badge-total pull-right">{{candidatesGrades.length}}</span></span>
                    </div>
                    <data-course-reg-type-legend examtype="{{current_examTypeId}}"></data-course-reg-type-legend>
                    <div class="clearfix"></div>

                    <scrollable-table resizable watch="candidatesGrades" ng-style="{height: candidatesGrades.length > 10 ? 450 : (38 + (candidatesGrades.length * 35.5))}">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th sortable-header col="studentId" width="10%">Student Id</th>
                                <th sortable-header col="studentName" width="25%">Student Name</th>
                                <th sortable-header col="quiz" width="6%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Quiz (20)</th>
                                <th sortable-header col="classPerformance" width="8%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Class Perf. (10)</th>
                                <th sortable-header col="partA" width="8%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Part-A ({{data.part_a_total}})</th>
                                <th sortable-header col="partB" width="8%" style="text-align: center;" ng-show="toggleColumn && courseType=='THEORY'">Part-B ({{data.part_b_total}})</th>
                                <th sortable-header col="total" width="8%" style="text-align: center;">Total</th>
                                <th sortable-header class="col2" col="gradeLetter" width="8%" style="text-align: center;">Grade Letter</th>
                                <th col="recheckAll" width="8%" style="text-align: center;">Recheck&nbsp;&nbsp;<input type="checkbox" data-ng-click="recheckAll(currentActor)" id="recheckAllCheckBox"/></th>
                                <th col="approveAll"  width="8%" style="text-align: center;">{{approveAction}}&nbsp;&nbsp;<input type="checkbox"  data-ng-click="approveAll(currentActor)" id="approveAllCheckBox"/></a>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="response in candidatesGrades" row-id="{{response.studentId}}" id="row_{{response.studentId}}" data-emit-last-repeater-element>
                                <td id="sid_{{response.studentId}}" ng-style="calculateStyle(response.regType)">{{response.studentId}}</td>
                                <td id="td_sname_{{response.studentId}}">{{ response.studentName }}</td>
                                <td id="td_quiz_{{response.studentId}}"  style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.quiz}}</td>
                                <td id="td_cperf_{{response.studentId}}"  style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.classPerformance}}</td>
                                <td id="td_parta_{{response.studentId}}" style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.partA}}</td>
                                <td id="td_partb_{{response.studentId}}" style="padding-right: 30px;text-align: right;" ng-show="toggleColumn && courseType=='THEORY'">{{response.partB}}</td>
                                <td id="td_total_{{response.studentId}}" style="padding-right: 30px;text-align: right;">{{response.total}}</td>
                                <td id="td_grade_letter_{{response.studentId}}" style="text-align: center;">{{response.gradeLetter}}</td>
                                <td id="td_recheck_{{response.studentId}}" style="text-align: center;"><input type="checkbox" id="recheck_{{response.studentId}}" data-ng-click="onRecheckClick(currentActor,response)" ng-checked="response.recheckStatusId"/> </td>
                                <td id="td_approved_{{response.studentId}}" style="text-align: center;"><input type="checkbox" id="approve_{{response.studentId}}" data-ng-click="onApproveClick(currentActor,response)"
                                                                       ng-checked="((gradeSubmissionStatus =='1' && response.statusId==3) || (gradeSubmissionStatus =='3' && response.statusId==5) || (gradeSubmissionStatus =='5' && response.statusId==7))
                                                                       && response.recheckStatusId==0"/> </td>
                            </tr>
                            </tbody>
                        </table>
                        <div class="table_overlay"></div>
                        <div class="modal-dialog" id="msg_div"  style="position: absolute;">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button class="close" aria-hidden="true" data-dismiss="modal" type="button" data-ng-click="closePopupModal()">×</button>
                                    <h4 id="modal-stackable-label" class="modal-title">Message</h4>
                                </div>
                                <div class="modal-body">
                                    <p id="msg_content"></p>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn btn-primary" type="button" data-ng-click="closePopupModal()">Close</button>
                                </div>
                            </div>
                        </div>

                    </scrollable-table>

                    <div class="row" style="padding-top:20px;padding-bottom: 20px;">
                        <div class="col-md-6">
                            <button type="button" class="btn btn-default btn-square" onclick='goBack()'>Back to Grade Sheet Selection</button>
                        </div>
                        <div class="col-md-6" style="text-align: right;">
                            <button type="button" class="btn btn-grey btn-square" data-ng-click="saveRecheckApproveGrades(currentActor,'save')">Save Data</button>
                            <modal  data-handler="modalSettings.recheckHandler" data-body="modalSettings.recheckBody"  data-header="modalSettings.header" data-ng-click-right-button="modalSettings.rightButton(currentActor,'recheck')"></modal>
                            <a data-target="#{{modalSettings.recheckHandler}}" role="button" id="recheckBtn"  class="btn btn-primary btn-square disabled" data-toggle="modal">{{recheckButtonLabel}}</a>

                            <modal   data-handler="modalSettings.approveHandler" data-body="modalSettings.approveBody"  data-header="modalSettings.header" data-ng-click-right-button="modalSettings.rightButton(currentActor,'approve')"></modal>
                            <a data-target="#{{modalSettings.approveHandler}}" role="button" id="approveBtn"  class="btn btn-green btn-square disabled" data-toggle="modal">{{approveButtonLabel}}</a>

                        </div>
                    </div>
                </div>
                <!-- End of Back and Forward Block (If the current actor has  back or forward role) -->



                <!-- Start of Recheck Candidates Grades -->
                <div ng-if="recheckCandidatesGrades.length >0 &&  ((gradeSubmissionStatus =='2' || gradeSubmissionStatus =='4' || gradeSubmissionStatus =='6') && currentActor!='preparer')">
                    <div class="btn btn-blue" style="margin-top: 20px;">
                        <i class="fa fa-check-square-o"></i>
                        <span style="padding-right: 100px;">Requested for Recheck Grades<span class="badge badge-total pull-right">{{recheckCandidatesGrades.length}}</span></span>
                    </div>
                    <data-course-reg-type-legend examtype="{{current_examTypeId}}"></data-course-reg-type-legend>
                    <div class="clearfix"></div>
                    <scrollable-table resizable watch="recheckCandidatesGrades" ng-style="{height: recheckCandidatesGrades.length > 10 ? 450 : (38 + (recheckCandidatesGrades.length * 35.5))}">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th sortable-header col="studentId" width="10%">Student Id</th>
                                <th sortable-header col="studentName" width="32%">Student Name</th>
                                <th sortable-header col="quiz" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Quiz (20)</th>
                                <th sortable-header col="classPerformance" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Class Perf. (10)</th>
                                <th sortable-header col="partA" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Part-A ({{data.part_a_total}})</th>
                                <th sortable-header col="partB" width="10%" style="text-align: center;" ng-show="toggleColumn && courseType=='THEORY'">Part-B ({{data.part_b_total}})</th>
                                <th sortable-header col="total" width="10%" style="text-align: center;">Total</th>
                                <th sortable-header col="gradeLetter" width="10%" style="text-align: center;">Grade Letter</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="response in recheckCandidatesGrades" row-id="{{response.studentId}}" id="row_{{response.studentId}}" data-emit-last-repeater-element>
                                <td id="sid_{{response.studentId}}" ng-style="calculateStyle(response.regType)">{{response.studentId}}</td>
                                <td id="td_sname_{{response.studentId}}">{{ response.studentName }}</td>
                                <td id="td_quiz_{{response.studentId}}" style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.quiz}}</td>
                                <td id="td_cperf_{{response.studentId}}" style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.classPerformance}}</td>
                                <td id="td_parta_{{response.studentId}}"  style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.partA}}</td>
                                <td id="td_partb_{{response.studentId}}" style="padding-right: 30px;text-align: right;" ng-show="toggleColumn && courseType=='THEORY'">{{response.partB}}</td>
                                <td id="td_total_{{response.studentId}}" style="padding-right: 30px;text-align: right;">{{response.total}}</td>
                                <td id="td_grade_letter_{{response.studentId}}" style="text-align: center;">{{response.gradeLetter}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </scrollable-table>
                    <div class="row">
                        <div class="col-md-6">
                            <button type="button" class="btn btn-default btn-square" onclick='goBack()'>Back to Grade Sheet Selection</button>
                        </div>
                    </div>
                </div>

                <div ng-if="recheckCandidatesGrades.length >0 &&  ((gradeSubmissionStatus =='2' || gradeSubmissionStatus =='4' || gradeSubmissionStatus =='6') && currentActor=='preparer')" id="top_div" >
                    <div class="btn btn-blue" style="margin-top: 20px;" >
                        <i class="fa fa-check-square-o"></i>
                        <span style="padding-right: 100px;">Requested for Recheck Grades <span class="badge badge-total pull-right">{{recheckCandidatesGrades.length}}</span></span>
                    </div>
                    <data-course-reg-type-legend examtype="{{current_examTypeId}}"></data-course-reg-type-legend>
                    <div class="clearfix"></div>
                    <scrollable-table resizable watch="recheckCandidatesGrades" ng-style="{height: recheckCandidatesGrades.length > 10 ? 450 : (38 + (recheckCandidatesGrades.length * 35.5))}">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th sortable-header col="studentId" width="10%">Student Id</th>
                                <th sortable-header col="studentName" width="28%">Student Name</th>
                                <th sortable-header col="quiz" width="8%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Quiz (20)</th>
                                <th sortable-header col="classPerformance" width="8%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Class Perf. (10)</th>
                                <th sortable-header col="partA" width="8%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Part-A ({{data.part_a_total}})</th>
                                <th sortable-header col="partB" width="8%" style="text-align: center;" ng-show="toggleColumn && courseType=='THEORY'">Part-B ({{data.part_b_total}})</th>
                                <th sortable-header col="total" width="8%" style="text-align: center;">Total</th>
                                <th sortable-header col="gradeLetter" width="8%" style="text-align: center;">Grade Letter</th>
                                <th col="recheckedAll" width="5%" style="text-align: center;">R&nbsp;&nbsp;<input type="checkbox" data-ng-click="recheckedAll(currentActor)" id="recheckedAllCheckBox"/>
                                </th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="response in recheckCandidatesGrades" row-id="{{response.studentId}}" id="row_{{response.studentId}}" data-emit-last-repeater-element>
                                <td id="sid_{{response.studentId}}" ng-style="calculateStyle(response.regType)">{{response.studentId}}</td>
                                <td id="td_sname_{{response.studentId}}">{{ response.studentName }}</td>
                                <td id="td_quiz_{{response.studentId}}" data-ng-show="courseType=='THEORY'">
                                    <input type="text"  style="width: 80px;border: 1px solid grey;text-align: right;padding-right: 20px;" id="quiz_{{response.studentId}}"
                                           value="{{response.quiz}}" onchange="calculateTotalAndGradeLetter(this.id)" onkeydown="handleKeyPress(event,this.id)"  maxlength="5" tabindex="{{$index+1}}0"
                                           data-ng-disabled="checkDisable(response.regType)"/>
                                    <img  class='img_tooltip'  id="tooltip_quiz_{{response.studentId}}"/>
                                </td>
                                <td id="td_cperf_{{response.studentId}}" data-ng-show="courseType=='THEORY'">
                                    <input type="text" style="width: 80px;border: 1px solid grey;text-align: right;padding-right: 20px;" id="class_perf_{{response.studentId}}"
                                           value="{{response.classPerformance}}"  onchange="calculateTotalAndGradeLetter(this.id)" onkeydown="handleKeyPress(event,this.id)"  maxlength="5" tabindex="{{$index+1}}1"
                                           data-ng-disabled="checkDisable(response.regType)"/>
                                    <img  class='img_tooltip'  id="tooltip_class_perf_{{response.studentId}}"/>
                                </td>
                                <td id="td_parta_{{response.studentId}}" data-ng-show="courseType=='THEORY'">
                                    <input type="text" style="width: 80px;border: 1px solid grey;text-align: right;padding-right: 20px;" id="part_a_{{response.studentId}}"
                                           value="{{response.partA}}" onchange="calculateTotalAndGradeLetter(this.id)"  onkeydown="handleKeyPress(event,this.id)" maxlength="5" tabindex="{{$index+1}}2"/>
                                    <img  class='img_tooltip'  id="tooltip_part_a_{{response.studentId}}"/>
                                </td>
                                <td id="td_partb_{{response.studentId}}" ng-show="toggleColumn && courseType=='THEORY'">
                                    <input type="text" style="width: 80px;border: 1px solid grey;text-align: right;padding-right: 20px;" id="part_b_{{response.studentId}}"
                                           value="{{response.partB}}" onchange="calculateTotalAndGradeLetter(this.id)" onkeydown="handleKeyPress(event,this.id)"  maxlength="5" tabindex="{{$index+1}}3"/>
                                    <img  class='img_tooltip'  id="tooltip_part_b_{{response.studentId}}"/> 
                                </td>
                                <td id="td_total_{{response.studentId}}" data-ng-if="courseType=='THEORY'">
                                    <input type="text" style="width: 80px;border: 1px solid grey;text-align: right;padding-right: 20px;"  disabled="disabled"
                                           id="total_{{response.studentId}}" value="{{response.total}}"/>
                                    <img  class='img_tooltip'  id="tooltip_total_{{response.studentId}}"/>
                                </td>
                                <td id="td_total_{{response.studentId}}" data-ng-if="courseType!='THEORY'">
                                    <input type="text" style="width: 80px;border: 1px solid grey;text-align: right;padding-right: 20px;"
                                           onchange="calculateTotalAndGradeLetter(this.id)" id="total_{{response.studentId}}" value="{{response.total}}"/>
                                    <img  class='img_tooltip'  id="tooltip_total_{{response.studentId}}"/>
                                </td>
                                <td id="td_grade_letter_{{response.studentId}}">
                                    <select  class="gradeSelectBox" id="grade_letter_{{response.studentId}}" disabled="disabled">
                                        <option value="">Select Grade</option>
                                        <option ng-selected="{{gradeLetter.id == response.gradeLetter}}" data-ng-repeat="gradeLetter in data.gradeLetterOptions" value="{{gradeLetter.id}}">{{gradeLetter.name}}</option>
                                    </select>
                                    <img  class='img_tooltip'  id="tooltip_grade_letter_{{response.studentId}}"/>
                                    <input type="hidden" id="reg_type_{{response.studentId}}" value="{{response.regType}}"/>
                                </td>
                                <td id="td_rechecked_{{response.studentId}}" style="text-align: center;">
                                    <input type="checkbox" id="rechecked_{{response.studentId}}"  ng-checked="response.statusId==1"/>
                                </td>
                            </tr>
                            </tbody>
                        </table>

                    </scrollable-table>
                    <br/><br/>
                    <div class="row">
                        <div class="col-md-6">
                            <button type="button" class="btn btn-default btn-square" onclick='goBack()'>Back to Grade Sheet Selection</button>
                        </div>
                        <div class="col-md-6" style="text-align: right;">
                            <button type="button" class="btn btn-grey btn-square" data-ng-click="saveGradeSheet()">Save Data</button>
                            <modal data-handler="modalSettings.submitHandler" data-body="modalSettings.submitBody"  data-header="modalSettings.header" data-ng-click-right-button="modalSettings.submitRightButton()"></modal>
                            <a data-target="#{{modalSettings.submitHandler}}" role="button" class="btn btn-green btn-square" data-toggle="modal" id="recheckedButton">Save & Send to Scrutinizer</a>
                            <!--
                            <button type="button" class="btn btn-green btn-square" data-ng-click="saveAndSendToScrutinizer()">Save & Send to Scrutinizer</button>
                            -->
                        </div>
                    </div>
                    <br/><br/>
                </div>
                <!-- End of Recheck Candidates Grades -->

                <!-- Start of Submitted Grades -->
                <div ng-if="submittedGrades.length>0  &&  ((currentActor=='scrutinizer' && gradeSubmissionStatus !='1') || (currentActor!='scrutinizer')) ">
                    <div class="btn btn-blue" style="margin-top: 20px;">
                        <i class="fa fa-check-circle-o"></i>
                        <span style="padding-right: 100px;">Submitted Grades<span class="badge badge-total pull-right">{{submittedGrades.length}}</span></span>
                    </div>
                    <data-course-reg-type-legend examtype="{{current_examTypeId}}"></data-course-reg-type-legend>
                    <div class="clearfix"></div>

                    <scrollable-table resizable watch="submittedGrades" ng-style="{height: submittedGrades.length > 10 ? 450 : (38 + (submittedGrades.length * 35.5))}">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th sortable-header col="studentId" width="10%">Student Id</th>
                                <th sortable-header col="studentName" width="32%">Student Name</th>
                                <th sortable-header col="quiz" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Quiz (20)</th>
                                <th sortable-header col="classPerformance" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Class Perf. (10)</th>
                                <th sortable-header col="partA" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Part-A ({{data.part_a_total}})</th>
                                <th sortable-header col="partB" width="10%" style="text-align: center;" ng-show="toggleColumn && courseType=='THEORY'">Part-B ({{data.part_b_total}})</th>
                                <th sortable-header col="total" width="8%" style="text-align: center;">Total</th>
                                <th sortable-header col="gradeLetter" width="7%" style="text-align: center;">Grade Letter</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="response in submittedGrades" row-id="{{response.studentId}}" id="row_{{response.studentId}}" data-emit-last-repeater-element>
                                <td id="sid_{{response.studentId}}" ng-style="calculateStyle(response.regType)" style="text-align: center;">{{response.studentId}}</td>
                                <td id="td_sname_{{response.studentId}}">{{ response.studentName }}</td>
                                <td id="td_quiz_{{response.studentId}}" style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.quiz}}</td>
                                <td id="td_cperf_{{response.studentId}}"  style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.classPerformance}}</td>
                                <td id="td_parta_{{response.studentId}}" style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.partA}}</td>
                                <td id="td_partb_{{response.studentId}}" style="padding-right: 30px;text-align: right;" ng-show="toggleColumn && courseType=='THEORY'">{{response.partB}}</td>
                                <td id="td_total_{{response.studentId}}" style="padding-right: 30px;text-align: right;">{{response.total}}</td>
                                <td id="td_grade_letter_{{response.studentId}}" style="text-align: center;">{{response.gradeLetter}}
                                    <input type="hidden" id="reg_type_{{response.studentId}}" value="{{response.regType}}"/>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </scrollable-table>
                    <br/><br/>
                    <div class="row">
                        <div class="col-md-6">
                            <button type="button" class="btn btn-default btn-square" onclick='goBack()'>Back to Grade Sheet Selection</button>
                        </div>
                    </div>
                </div>
                <!-- End of Submitted Grades -->

                <!-- Start of Scrutinized Grades -->
                <div ng-if="scrutinizedGrades.length>0  &&  ((currentActor=='head' && gradeSubmissionStatus !='3') || (currentActor!='head')) ">
                    <div class="btn btn-blue" style="margin-top: 20px;">
                        <i class="fa fa-check-circle-o"></i>
                        <span style="padding-right: 100px;">Scrutinized Grades<span class="badge badge-total pull-right">{{scrutinizedGrades.length}}</span></span>
                    </div>
                    <data-course-reg-type-legend examtype="{{current_examTypeId}}"></data-course-reg-type-legend>
                    <div class="clearfix"></div>

                    <scrollable-table resizable watch="scrutinizedGrades" ng-style="{height: scrutinizedGrades.length > 10 ? 450 : (38 + (scrutinizedGrades.length * 35.5))}">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th sortable-header col="studentId" width="10%">Student Id</th>
                                <th sortable-header col="studentName" width="32%">Student Name</th>
                                <th sortable-header col="quiz" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Quiz (20)</th>
                                <th sortable-header col="classPerformance" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Class Perf. (10)</th>
                                <th sortable-header col="partA" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Part-A ({{data.part_a_total}})</th>
                                <th sortable-header col="partB" width="10%" style="text-align: center;" ng-show="toggleColumn && courseType=='THEORY'">Part-B ({{data.part_b_total}})</th>
                                <th sortable-header col="total" width="10%" style="text-align: center;">Total</th>
                                <th sortable-header col="gradeLetter" width="10%" style="text-align: center;">Grade Letter</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="response in scrutinizedGrades" row-id="{{response.studentId}}" id="row_{{response.studentId}}" data-emit-last-repeater-element>
                                <td id="sid_{{response.studentId}}" ng-style="calculateStyle(response.regType)">{{response.studentId}}</td>
                                <td id="td_sname_{{response.studentId}}">{{ response.studentName }}</td>
                                <td id="td_quiz_{{response.studentId}}"  style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.quiz}}</td>
                                <td id="td_cperf_{{response.studentId}}"  style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.classPerformance}}</td>
                                <td id="td_parta_{{response.studentId}}" style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.partA}}</td>
                                <td id="td_partb_{{response.studentId}}" style="padding-right: 30px;text-align: right;" ng-show="toggleColumn && courseType=='THEORY'">{{response.partB}}</td>
                                <td id="td_total_{{response.studentId}}" style="padding-right: 30px;text-align: right;">{{response.total}}</td>
                                <td id="td_grade_letter_{{response.studentId}}" style="text-align: center;">{{response.gradeLetter}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </scrollable-table>
                    <br/><br/>
                    <div class="row">
                        <div class="col-md-6">
                            <button type="button" class="btn btn-default btn-square" onclick='goBack()'>Back to Grade Sheet Selection</button>
                        </div>
                    </div>
                </div>
                <!-- End of Scrutinized Grades -->

                <!-- Start of Approved Grades -->
                <div ng-if="approvedGrades.length>0 &&  ((currentActor=='coe' && gradeSubmissionStatus !='5') || (currentActor!='coe')) ">
                    <div class="btn btn-blue" style="margin-top: 20px;">
                        <i class="fa fa-check-circle-o"></i>
                        <span style="padding-right: 100px;">Approved(by Head) Grades<span class="badge badge-total pull-right">{{approvedGrades.length}}</span></span>
                    </div>
                    <data-course-reg-type-legend examtype="{{current_examTypeId}}"></data-course-reg-type-legend>
                    <div class="clearfix"></div>

                    <scrollable-table resizable watch="approvedGrades" ng-style="{height: approvedGrades.length > 10 ? 450 : (38 + (approvedGrades.length * 35.5))}">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th sortable-header col="studentId" width="10%">Student Id</th>
                                <th sortable-header col="studentName" width="32%">Student Name</th>
                                <th sortable-header col="quiz" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Quiz (20)</th>
                                <th sortable-header col="classPerformance" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Class Perf. (10)</th>
                                <th sortable-header col="partA" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Part-A ({{data.part_a_total}})</th>
                                <th sortable-header col="partB" width="10%" style="text-align: center;" ng-show="toggleColumn && courseType=='THEORY'">Part-B ({{data.part_b_total}})</th>
                                <th sortable-header col="total" width="10%" style="text-align: center;">Total</th>
                                <th sortable-header col="gradeLetter" width="10%" style="text-align: center;">Grade Letter</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="response in approvedGrades" row-id="{{response.studentId}}" id="row_{{response.studentId}}" data-emit-last-repeater-element>
                                <td id="sid_{{response.studentId}}" ng-style="calculateStyle(response.regType)">{{response.studentId}}</td>
                                <td id="td_sname_{{response.studentId}}">{{ response.studentName }}</td>
                                <td id="td_quiz_{{response.studentId}}"  style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.quiz}}</td>
                                <td id="td_cperf_{{response.studentId}}" style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.classPerformance}}</td>
                                <td id="td_parta_{{response.studentId}}" style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.partA}}</td>
                                <td id="td_partb_{{response.studentId}}" style="padding-right: 30px;text-align: right;" ng-show="toggleColumn && courseType=='THEORY'">{{response.partB}}</td>
                                <td id="td_total_{{response.studentId}}" style="padding-right: 30px;text-align: right;">{{response.total}}</td>
                                <td id="td_grade_letter_{{response.studentId}}" style="text-align: center;">{{response.gradeLetter}}</td>
                            </tr>
                            </tbody>
                        </table>
                    </scrollable-table>
                    <br/><br/>
                    <div class="row">
                        <div class="col-md-6">
                            <button type="button" class="btn btn-default btn-square" onclick='goBack()'>Back to Grade Sheet Selection</button>
                        </div>
                    </div>
                </div>
                <!-- End of Approved Grades -->

                <!-- Start of Accepted Grades -->
                <div ng-if="acceptedGrades.length>0 || recheckAcceptedGrades.length>0">
                    <div class="btn btn-blue" style="margin-top: 20px;">
                        <i class="fa fa-check-circle"></i>
                        <span style="padding-right: 100px;">Accepted(by CoE) Grades<span class="badge badge-total pull-right">{{acceptedGrades.length}}</span></span>
                    </div>
                    <data-course-reg-type-legend examtype="{{current_examTypeId}}"></data-course-reg-type-legend>
                    <div class="clearfix"></div>
                    <scrollable-table resizable watch="acceptedGrades" ng-style="{height: acceptedGrades.length > 10 ? 450 : (38 + (acceptedGrades.length * 35.5))}">
                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th sortable-header col="studentId" width="8%">Student Id</th>
                                <th sortable-header col="studentName" width="22%">Student Name</th>
                                <th sortable-header col="quiz" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Quiz (20)</th>
                                <th sortable-header col="classPerformance" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Class Perf. (10)</th>
                                <th sortable-header col="partA" width="10%" style="text-align: center;" data-ng-show="courseType=='THEORY'">Part-A ({{data.part_a_total}})</th>
                                <th sortable-header col="partB" width="10%" style="text-align: center;" ng-show="toggleColumn && courseType=='THEORY'">Part-B ({{data.part_b_total}})</th>
                                <th sortable-header col="total" width="10%" style="text-align: center;">Total</th>
                                <th sortable-header col="gradeLetter" width="10%" style="text-align: center;">Grade Letter</th>
                                <th col="recheckAll" width="8%" style="text-align: center;" data-ng-if="gradeSubmissionStatus ='7' && (currentActor=='coe')">
                                    Recheck&nbsp;&nbsp;
                                 <input type="checkbox" data-ng-click="recheckAll(currentActor)" id="recheckAllCheckBox" /></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="response in acceptedGrades" row-id="{{response.studentId}}" id="row_{{response.studentId}}" data-emit-last-repeater-element>
                                <td  id="sid_{{response.studentId}}" ng-style="calculateStyle(response.regType)">{{response.studentId}}</td>
                                <td id="td_sname_{{response.studentId}}">{{ response.studentName }}</td>
                                <td id="td_quiz_{{response.studentId}}"  style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.quiz}}</td>
                                <td id="td_cperf_{{response.studentId}}"  style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.classPerformance}}</td>
                                <td id="td_parta_{{response.studentId}}" style="padding-right: 30px;text-align: right;" data-ng-show="courseType=='THEORY'">{{response.partA}}</td>
                                <td id="td_partb_{{response.studentId}}" style="padding-right: 30px;text-align: right;" ng-show="toggleColumn && courseType=='THEORY'">{{response.partB}}</td>
                                <td id="td_total_{{response.studentId}}" style="padding-right: 30px;text-align: right;">{{response.total}}</td>
                                <td id="td_grade_letter_{{response.studentId}}" style="text-align: center;">{{response.gradeLetter}}</td>
                                <td id="td_recheck_{{response.studentId}}" style="text-align: center;" data-ng-if="gradeSubmissionStatus ='7' && (currentActor=='coe')">
                                    <input type="checkbox" id="recheck_{{response.studentId}}" data-ng-click="onRecheckClick(currentActor,response)" ng-checked="response.recheckStatusId"/>
                                </td>
                            </tr>
                            </tbody>
                        </table>
                    </scrollable-table>
                    <br/>
                    <div class="row">
                        <div class="col-md-6">
                            <button type="button" class="btn btn-default btn-square" onclick='goBack()'>Back to Grade Sheet Selection</button>
                        </div>
                        <div class="col-md-6" style="text-align: right;" data-ng-if="gradeSubmissionStatus ='7' && (currentActor=='coe')">
                            <modal  data-handler="modalSettings.recheckHandler" data-body="modalSettings.recheckBody"  data-header="modalSettings.header" data-ng-click-right-button="modalSettings.rightButton(currentActor,'recheckAccepted')"></modal>
                            <a data-target="#{{modalSettings.recheckHandler}}" role="button" id="recheckBtn"  class="btn btn-primary btn-square disabled" data-toggle="modal">{{recheckButtonLabel}}</a>
                        </div>
                    </div>

                </div>
                <!-- End  of Accepted Grades -->

                <hr class="style-two" />
                <br/><br/>
                <div class="row">
                    <div class="col-md-6">
                        <div class="panel panel-green">
                            <div class="panel-heading"><i class="fa fa-table"></i>&nbsp;
                                Statistics</div>
                            <div class="panel-body">
                                <button type="button" class="btn btn-green btn-outlined" data-ng-click="toggleStatRules('tbl_stat')" id="btn_stat">Statistics Table</button>
                                <button type="button" class="btn btn-green btn-outlined" data-ng-click="toggleStatRules('tbl_rules')">Grade Rules Table</button>
                                <p style="margin-top: 20px;">
                                <table class="table table-hover table-bordered" id="tbl_stat">
                                    <tbody>
                                    <tr>
                                        <td width="16.5%"><b>A+</b></td>
                                        <td width="16.5%">{{chartData[0].total}}</td>
                                        <td width="16.5%"><b>B+</b></td>
                                        <td width="16.5%">{{chartData[3].total}}</td>
                                        <td width="16.5%"><b>C+</b></td>
                                        <td width="16.5%">{{chartData[6].total}}</td>
                                    </tr>
                                    <tr>
                                        <td><b>A</b></td>
                                        <td>{{chartData[1].total}}</td>
                                        <td><b>B</b></td>
                                        <td>{{chartData[4].total}}</td>
                                        <td><b>C</b></td>
                                        <td>{{chartData[7].total}}</td>
                                    </tr>
                                    <tr>
                                        <td><b>A-</b></td>
                                        <td>{{chartData[2].total}}</td>
                                        <td><b>B-</b></td>
                                        <td>{{chartData[5].total}}</td>
                                        <td><b>D</b></td>
                                        <td>{{chartData[8].total}}</td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td><b>F</b></td>
                                        <td>{{chartData[9].total}}</td>
                                    </tr>
                                    <tr>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td></td>
                                        <td><b>Total</b></td>
                                        <td><span class="badge badge-success pull-left">{{chartData[0].total+chartData[1].total+chartData[2].total+chartData[3].total+chartData[4].total+chartData[5].total+chartData[6].total+chartData[7].total+chartData[8].total+chartData[9].total}}</span></td>
                                    </tr>


                                    </tbody>

                                </table>

                                <table class="table table-hover table-bordered" id="tbl_rules" style="display: none;">
                                    <thead>
                                    <th>Numerical Equivalent</th>
                                    <th>Letter Grade</th>
                                    <th>Grade Point</th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>80% and above</td>
                                        <td>A+</td>
                                        <td>4.00</td>
                                    </tr>
                                    <tr>
                                        <td>75% to less than 80%</td>
                                        <td>A</td>
                                        <td>3.75</td>
                                    </tr>
                                    <tr>
                                        <td>70% to less than 75%</td>
                                        <td>A-</td>
                                        <td>3.50</td>
                                    </tr>
                                    <tr>
                                        <td>65%% to less than 70%</td>
                                        <td>B+</td>
                                        <td>3.25</td>
                                    </tr>
                                    <tr>
                                        <td>60% to less than 65%</td>
                                        <td>B</td>
                                        <td>3.00</td>
                                    </tr>
                                    <tr>
                                        <td>55% to less than 60%</td>
                                        <td>B-</td>
                                        <td>2.75</td>
                                    </tr>
                                    <tr>
                                        <td>50% to less than 55%</td>
                                        <td>C+</td>
                                        <td>2.50</td>
                                    </tr>
                                    <tr>
                                        <td>45% to less than 50%</td>
                                        <td>C</td>
                                        <td>2.25</td>
                                    </tr>
                                    <tr>
                                        <td>40% to less than 45%</td>
                                        <td>D</td>
                                        <td>2.00</td>
                                    </tr>
                                    <tr>
                                        <td>less than 40%</td>
                                        <td>F</td>
                                        <td>0.00</td>
                                    </tr>

                                    </tbody>
                                    <thead>
                                    <th>Status</th>
                                    <th>Letter Grade</th>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td>Withheld</td>
                                        <td>W</td>
                                    </tr>
                                    <tr>
                                        <td>Exempted</td>
                                        <td>E</td>
                                    </tr>
                                    <tr>
                                        <td>Passed</td>
                                        <td>P</td>
                                    </tr>
                                    </tbody>
                                </table>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="panel panel-orange">
                            <div class="panel-heading"><i class="fa fa-bar-chart-o"></i>&nbsp;
                                Grade Bar Chart
                            </div>
                            <div class="panel-body">
                                <div style="width: 100%; height:250px">
                                    <am-chart id="gradeChart" options="amChartOptions"></am-chart>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--Modal Prompt for Xls Data Upload-->
<div id="modal-prompt" tabindex="-1" role="dialog" aria-labelledby="modal-prompt-label"
     aria-hidden="true" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" data-dismiss="modal" aria-hidden="true"
                        class="close">&times;</button>
                <h4 id="modal-prompt-label" class="modal-title">Paste your excel data here</h4></div>
            <div class="modal-body">
                <textarea name="excel_data" style="width:550px;height:150px;border: 1px solid grey;"></textarea><br>
                <br><br>
                <div class="alert alert-danger" data-ng-show="excel_copy_paste_error_div"><strong>Sorry!</strong> You are using a wrong excel formatted file.
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
                <button type="button"  data-ng-click="pasteExcelData()"  class="btn btn-primary">Process</button>
            </div>
        </div>
    </div>
</div>

<!--Modal for Marks Submission Status Log-->
<div id="modal-marks_submission_status_log" tabindex="-1" role="dialog" aria-labelledby="modal-prompt-label"
     aria-hidden="true" class="modal fade">
    <div class="modal-dialog modal-wide-width">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" data-dismiss="modal" aria-hidden="true"
                        class="close">&times;</button>
                <h4 id="modal-marks_submission_status_log-label" class="modal-title">Marks Submission Status Log</h4></div>
            <div class="modal-body">
                <table class="table table-hover table-condensed">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Status</th>
                        <th>Date-Time</th>
                        <th>Actor</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="log in marksSubmissionStatusLogs track by $index">
                        <td>{{$index + 1}}</td>
                        <td>{{log.statusName}}</td>
                        <td>{{log.insertedOn}}</td>
                        <td>{{log.userName}}</td>
                    </tr>
                    </tbody>
                </table>

            </div>
            <div class="modal-footer">
                <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
            </div>
        </div>
    </div>
</div>

<!--Modal for Grade  Status Log-->
<div id="modal-marks_status_log" tabindex="-1" role="dialog" aria-labelledby="modal-prompt-label"
     aria-hidden="true" class="modal fade">
    <div class="modal-dialog modal-wide-width">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" data-dismiss="modal" aria-hidden="true"
                        class="close">&times;</button>
                <h4 id="modal-marks_status_log-label" class="modal-title">Student's Marks Submission Log</h4></div>
            <div class="modal-body">
                <div class="form-body pal">
                    <div class="form-group">
                        <label class="col-md-2 control-label" style="margin-top: 7px;font-weight: bold;">Student Id</label>
                        <div class="col-md-3">
                            <input
                                    id="studentId_log" type="text" placeholder="" class="form-control" style="text-align:center;font-weight: bold;color: blue;"/>

                        </div>
                        <div class="col-md-2">
                            <button type="button" id="btnLog" class="btn btn-green btn-square" onclick="fetchMarksLog()">Search</button>
                        </div>
                    </div>
                </div>
                <hr class="style-two">
                <table class="table table-hover table-condensed">
                    <thead>
                    <tr>
                        <th>#</th>
                        <th>Status</th>
                        <th>Date-Time</th>
                        <th>Actor Role</th>
                        <th>Name</th>
                        <th>Quiz</th>
                        <th>Class Perf.</th>
                        <th>Part-A</th>
                        <th>Part-B</th>
                        <th>Total</th>
                        <th>Grade Letter</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="log in marksLogs track by $index">
                        <td>{{$index + 1}}</td>
                        <td>{{log.statusName}}</td>
                        <td>{{log.insertedOn}}</td>
                        <td>{{log.roleName}}</td>
                        <td>{{log.userName}}</td>
                        <td>{{log.quiz}}</td>
                        <td>{{log.classPerformance}}</td>
                        <td>{{log.partA}}</td>
                        <td>{{log.partB}}</td>
                        <td>{{log.total}}</td>
                        <td>{{log.gradeLetter}}</td>
                    </tr>
                    </tbody>
                </table>

            </div>
            <div class="modal-footer">
                <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
            </div>
        </div>
    </div>
</div>

<!--Modal for feature info-->
<div id="modal-feature-info" tabindex="-1" role="dialog" aria-labelledby="modal-default-label"
     aria-hidden="true" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" data-dismiss="modal" aria-hidden="true"
                        class="close" style="opacity: 1;margin-top: 0px;">&times;</button>
                <h4 id="modal-feature-info-title" class="modal-title">New Feature Information</h4></div>
            <div class="modal-body" id="modal-feature-info-body">Modal body goes here</div>
            <div class="modal-footer">
                <button type="button" data-dismiss="modal" class="btn btn-default">Close</button>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="vendors/pieMenu/css/piemenu.css">
<script src="vendors/pieMenu/js/jquery.menu.js"></script>

<style>
    ul.b {list-style-type: square;}
    ul.b li{line-height: 35px;}
</style>
<script type="text/javascript">
    $('#outer_container').PieMenu({
        'starting_angel':180,
        'angel_difference' : 90,
        'radius':100
    });

    function removeTableRow(rowid){
        $('#'+rowid).remove();
    }

    function goBack(){
        document.getElementById('selection1').style.display='block';
        document.getElementById('selection2').style.display='none';
        $('.page-title.ng-binding').html("Grade Sheet Selection");

        var scope = angular.element(document.getElementById("frmGradeSheetPramSelector")).scope();
        scope.$apply(function () {
            scope.fetchGradeSubmissionTable();
        });
    }
    //$('.page-title.ng-binding').html("Grade Sheet Selection");
    $("#btn_stat").focus();

    function calculateTotalAndGradeLetter(fieldId){
        var arr=fieldId.split("_");
        var studentId = arr[arr.length-1];
        var scope = angular.element(document.getElementById(fieldId)).scope();
        scope.$apply(function () {
            scope.calculateTotalAndGradeLetter(studentId, $("#reg_type_"+studentId).val());
        });
    }


    function handleKeyPress(event,elementId){
        var arr=elementId.split("_");
        var studentId = arr[arr.length-1];
        var tabIndex=$("#"+elementId).attr("tabindex");
        if(event.keyCode==40){  //Down Arrow
                var nextTabIndex=parseInt(tabIndex)+10;
                var element=$('input[tabindex='+nextTabIndex+']');
                element.focus();
        }
        else if(event.keyCode==38){ //Up Arrow
            var nextTabIndex=parseInt(tabIndex)-10;
            var element=$('input[tabindex='+nextTabIndex+']');
            element.focus();
        }
        //left 37
        //right 39
        //up 38
        //down 40
    }

    function fetchMarksLog(){
        var scope = angular.element(document.getElementById("btnLog")).scope();
        scope.$apply(function () {
            scope.fetchMarksLog($("#studentId_log").val());
        });
    }

    /*Temporary Modal Setup */
    /*
    var contents = "<ul class='b'> "+
        "<li>You can now put <b>'Absent'</b> and <b>'Reported'</b> information in online grade sheet.</li>"+
        "<li><b>'Absent'</b> and <b>'Reported'</b> are allowed only for  <b>'Theory'</b> Grade Sheet.</li>"+
        "<li>Provide 'Abs' for Absent and 'Rep' for Reported Students.</li>"+
        "<li>You can put <font color='#A569BD' style='font-size: 15px;font-weight: bold;'>\"Abs\"</font> or <font color='#E74C3C' style='font-size: 15px;font-weight: bold;'>\"Rep\"</font> only for Part-A and Part-B column..</li>"+
    "</ul>";
    */
    var contents = "<ul class='b'> "+
        "<li>Online marks submission is now more <b>secure.</b></li>"+
        "<li>Each time you save your grades, IUMS will send you an <font color='#E74C3C' style='font-size: 15px;font-weight: bold;'>OTP (One Time Password)</font> to your email address.<br/>"+
        "You should provide the correct OTP during online marks submission.</li>"+
        "<li>If you provide the wrong OTP for five (5) times, your account will be locked.<br/>"+
        "In that case, please contact with IUMS Support.</li>"+
        "</ul>";

    $("#").html("Newly Added Features");
    $("#modal-feature-info-body").html(contents);
</script>
