

ALTER TABLE DB_IUMS.SP_PARAMETER
 DROP PRIMARY KEY CASCADE;

DROP TABLE DB_IUMS.SP_PARAMETER CASCADE CONSTRAINTS;

CREATE TABLE DB_IUMS.SP_PARAMETER
(
  ID            VARCHAR2(18 BYTE)               NOT NULL,
  SEMESTER_ID   NUMBER,
  EXAM_TYPE     NUMBER,
  EXCLUDE_DATE  VARCHAR2(20 BYTE)
)
TABLESPACE SYSTEM
RESULT_CACHE (MODE DEFAULT)
PCTUSED    40
PCTFREE    10
INITRANS   1
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
LOGGING
NOCOMPRESS
NOCACHE
NOPARALLEL
MONITORING;


CREATE UNIQUE INDEX DB_IUMS.SP_PARAMETER_PK ON DB_IUMS.SP_PARAMETER
(ID)
LOGGING
TABLESPACE SYSTEM
PCTFREE    10
INITRANS   2
MAXTRANS   255
STORAGE    (
            INITIAL          64K
            NEXT             1M
            MINEXTENTS       1
            MAXEXTENTS       UNLIMITED
            PCTINCREASE      0
            FREELISTS        1
            FREELIST GROUPS  1
            BUFFER_POOL      DEFAULT
            FLASH_CACHE      DEFAULT
            CELL_FLASH_CACHE DEFAULT
           )
NOPARALLEL;


CREATE OR REPLACE TRIGGER DB_IUMS.SP_PARAMETER_TRG
BEFORE INSERT ON DB_IUMS.SP_PARAMETER
FOR EACH ROW
BEGIN
  <<COLUMN_SEQUENCES>>
  BEGIN
    IF INSERTING AND :NEW.ID IS NULL THEN
      SELECT SP_PARAMETER_SEQ.NEXTVAL INTO :NEW.ID FROM SYS.DUAL;
    END IF;
  END COLUMN_SEQUENCES;
END;
/


ALTER TABLE DB_IUMS.SP_PARAMETER ADD (
  CONSTRAINT SP_PARAMETER_PK
  PRIMARY KEY
  (ID)
  USING INDEX DB_IUMS.SP_PARAMETER_PK
  ENABLE VALIDATE);

Insert into DB_IUMS.SP_PARAMETER
   (ID, SEMESTER_ID, EXAM_TYPE, EXCLUDE_DATE)
 Values
   ('1', 11022015, 1, '16-MAR-16');
COMMIT;




Insert into DB_IUMS.MAIN_NAVIGATION
   (NAVIGATION_ID, MENU_TITLE, PERMISSION, LOCATION, PARENT_MENU,
    ICON_IMG_CLASS, ICON_COLOR_CLASS, VIEW_ORDER, STATUS, LAST_MODIFIED)
 Values
   (2036, 'Application C/C/I', 'student:applicationCCI', '/applicationCCI', 0,
    'fa fa-file-word-o', NULL, 24, 1, NULL);




Insert into DB_IUMS.PERMISSIONS
   (ROLE_ID, PERMISSIONS, PERMISSION_ID, LAST_MODIFIED)
 Values
   (11, 'user:home,student:profile,student:classRoutine,student:optCourseApplication,student:applications,student:applicationCCI', 1003, NULL);




     CREATE TABLE "DB_IUMS"."APPLICATION_CCI"
      (	"SEMESTER_ID" NUMBER,
   	"STUDENT_ID" VARCHAR2(9 BYTE),
   	"COURSE_ID" VARCHAR2(25 BYTE),
   	"APPLICATION_TYPE" NUMBER,
   	"APPLIED_ON" DATE,
   	"ID" NUMBER NOT NULL ENABLE,
   	 CONSTRAINT "APPLICATION_CCI_PK" PRIMARY KEY ("ID")
     USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS
     STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
     PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
     TABLESPACE "SYSTEM"  ENABLE
      ) SEGMENT CREATION IMMEDIATE
     PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
     STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
     PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
     TABLESPACE "SYSTEM" ;

      COMMENT ON COLUMN "DB_IUMS"."APPLICATION_CCI"."APPLICATION_TYPE" IS '2=clearance, 3=carry, 4= special carry, 5= improvement';

     CREATE OR REPLACE TRIGGER "DB_IUMS"."APPLICATION_CCI_TRG"
   BEFORE INSERT ON APPLICATION_CCI
   FOR EACH ROW
   BEGIN
     <<COLUMN_SEQUENCES>>
     BEGIN
       IF INSERTING AND :NEW.SEMESTER_ID IS NULL THEN
         SELECT APPLICATION_CCI_SEQ.NEXTVAL INTO :NEW.SEMESTER_ID FROM SYS.DUAL;
       END IF;
     END COLUMN_SEQUENCES;
   END;
   /
   ALTER TRIGGER "DB_IUMS"."APPLICATION_CCI_TRG" ENABLE;





  CREATE TABLE "DB_IUMS"."CARRY_EXAM_MAP"
   (	"STUDENT_YEAR" NUMBER,
	"STUDENT_SEMESTER" NUMBER,
	"CAN_TAKE_YEAR" NUMBER,
	"CAN_TAKE_SEMESTER" NUMBER
   ) SEGMENT CREATION IMMEDIATE
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "SYSTEM" ;




update students set curr_year=3 and curr_semester=2 where student_id='160105001';